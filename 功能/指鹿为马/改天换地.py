# 镜花水月: 指所有建筑都造不出来
from 蓝图格式.蓝图 import 蓝图
from 蓝图格式.蓝图 import url字符串
from 蓝图格式.图标 import 图标
from 功能.mod兼容 import mod类型
from 功能.mod兼容 import 当前mod类型
from 功能.格式查找 import 蓝图内查找
from 功能.指鹿为马.通用 import 物品替换


class 改天换地字典:
    通用 = {
        "高速传送带" : "传送带",
        "极速传送带" : "传送带",
        "集装分拣器" : "分拣器",
        "电力感应塔" : "传送带",
        "四向分流器" : "分拣器",
        "储液罐" : "分拣器",
        "自动集装机" : "分拣器",
        "星际物流运输站": "行星内物流运输站",
        "大型采矿机": "行星内物流运输站",
        "位面熔炉" : "电弧熔炉",
        "采矿机": "分拣器",
        "抽水站": "分拣器",
        "分馏塔" : "分拣器",
    }

    原版 = {
        "负熵熔炉": "电弧熔炉",
        "量子化工厂": "化工厂",
        "制造台 Mk.II" : "制造台 Mk.I",
        "制造台 Mk.III": "制造台 Mk.I",
        "重组式制造台": "制造台 Mk.I",
    }

    创世31 = {
        "量子化工厂": "化工厂",
    }

    创生 = {
        "负熵熔炉": "电弧熔炉",
    }

# 记得四向分流器
def 改天换地(输入数据: 蓝图) -> None:
    所有建筑 = 蓝图内查找(输入数据).所有建筑()
    for 当前建筑 in 所有建筑:
        l_物品序号名称 = 当前建筑.物品序号.转名字()
        if 当前建筑.物品序号.是四向吗() and 当前建筑.模型序号.是四向吗():
            pass
        elif l_物品序号名称 != 当前建筑.模型序号.转名字():
            continue
        # endif
        物品序号 = 改天换地字典.通用.get(l_物品序号名称)
        if 物品序号 is not None:
            物品替换(当前建筑).为(图标(物品序号))
        # endif
        if 当前mod类型 == mod类型.戴森球原版:
            物品序号 = 改天换地字典.原版.get(l_物品序号名称)
            if 物品序号 is not None:
                物品替换(当前建筑).为(图标(物品序号))
        elif 当前mod类型 == mod类型.创世之书31:
            物品序号 = 改天换地字典.创世31.get(l_物品序号名称)
            if 物品序号 is not None:
                物品替换(当前建筑).为(图标(物品序号))
        elif 当前mod类型 == mod类型.宇宙创生:
            物品序号 = 改天换地字典.创生.get(l_物品序号名称)
            if 物品序号 is not None:
                物品替换(当前建筑).为(图标(物品序号))


